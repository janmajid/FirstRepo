<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2020 Premier League Standings</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>

    <h1>âš½ Premier League 2020 Standings</h1>
    
    <div id="standings-container">
        Loading standings data...
    </div>

    <script>
        const API_ENDPOINT = 'https://api-football-standings.azharimm.site/leagues/eng.1/standings?season=2020&sort=asc';
        const container = document.getElementById('standings-container');

        // Main function to fetch and display the data
        async function fetchAndRenderStandings() {
            try {
                // 1. Fetch data from the API
                const response = await fetch(API_ENDPOINT);

                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }

                // 2. Parse the JSON response
                const result = await response.json();
                
                // Navigate the JSON structure: data -> standings
                const standings = result.data.standings;

                if (!standings || standings.length === 0) {
                    container.innerHTML = 'No standings data available for this season.';
                    return;
                }
                
                // 3. Generate the HTML table content
                let htmlContent = '<table>';
                htmlContent += '<tr><th>Rank</th><th>Team</th><th>Points</th><th>Played</th></tr>';

                standings.forEach(team => {
                    // Utility function to safely find a stat value by name
                    const findStat = (statName) => {
                        const stat = team.stats.find(s => s.name === statName);
                        return stat ? stat.displayValue : 'N/A';
                    };

                    const rank = findStat('rank');
                    const points = findStat('points');
                    const gamesPlayed = findStat('gamesPlayed');

                    htmlContent += `
                        <tr>
                            <td>${rank}</td>
                            <td>${team.team.displayName}</td>
                            <td>${points}</td>
                            <td>${gamesPlayed}</td>
                        </tr>
                    `;
                });
                
                htmlContent += '</table>';
                
                // 4. Insert the generated HTML into the container
                container.innerHTML = htmlContent;

            } catch (error) {
                console.error('Error fetching or processing data:', error);
                container.innerHTML = 'ðŸ”´ Failed to load standings. See console for error details.';
            }
        }

        // Execute the function when the page loads
        fetchAndRenderStandings();
    </script>
</body>
</html>
